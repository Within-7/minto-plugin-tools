---
name: "beauty-step2"
description: "幻灯片内容转换与拆分。在beauty命令的步骤2执行时自动调用，将文档内容完整转换为结构化的幻灯片页面，确保内容零遗漏、逻辑清晰、页面适量。"
---

# Beauty 步骤2：幻灯片内容转换与拆分

## 目标

将文档内容完整转换为结构化的幻灯片页面，确保内容零遗漏、逻辑清晰、页面适量。

## ⚠️ 核心原则

- ✅ 100%保留原文所有内容，零遗漏、零压缩、零简化
- ✅ 每页内容不超过8个要点，超过则分页展示
- ✅ 遇到内容过多时，使用"继续"机制分批处理
- ❌ 绝对禁止为了省token而压缩、省略、简化内容

## 📋 执行流程（4个子步骤）

```
步骤2.1：识别文档结构层次
  ↓
步骤2.2：规划幻灯片页面类型
  ↓
步骤2.3：拆分内容到具体页面
  ↓
步骤2.4：验证内容完整性
```

---

## 步骤 2.1：识别文档结构层次

### 目标

完整识别文档的所有标题层级和内容块，建立清晰的结构地图。

### 执行要求

#### 阶段1：提取标题层级

基于步骤1的分析结果，提取完整的标题结构：

```markdown
文档结构地图：

H1: 主标题（文档总标题）
  ├─ H2: 第一章节
  │   ├─ H3: 子章节1.1
  │   │   ├─ 要点1
  │   │   ├─ 要点2
  │   │   └─ 要点3
  │   ├─ H3: 子章节1.2
  │   │   ├─ 要点1
  │   │   └─ 要点2
  │   └─ H3: 子章节1.3
  │       └─ 要点1
  ├─ H2: 第二章节
  │   ├─ H3: 子章节2.1
  │   └─ H3: 子章节2.2
  └─ H2: 第三章节
      └─ H3: 子章节3.1
```

#### 阶段2：统计内容密度

为每个章节统计内容量：

```markdown
内容密度统计：

第一章节（H2）：
  ├─ 子章节1.1：要点数 3个，数据点 2个，表格 0个
  ├─ 子章节1.2：要点数 2个，数据点 5个，表格 1个
  └─ 子章节1.3：要点数 1个，数据点 0个，表格 0个
  → 章节总计：要点 6个，数据点 7个，表格 1个

第二章节（H2）：
  ├─ 子章节2.1：要点数 8个，数据点 3个，表格 0个
  ├─ 子章节2.2：要点数 12个，数据点 0个，表格 2个
  → 章节总计：要点 20个，数据点 3个，表格 2个

第三章节（H2）：
  └─ 子章节3.1：要点数 4个，数据点 1个，表格 0个
  → 章节总计：要点 4个，数据点 1个，表格 0个
```

#### 阶段3：识别特殊内容块

标记需要特殊处理的内容：

```markdown
特殊内容标记：

□ 对比分析（A vs B）：第X章节
□ 时间序列（2024-2026）：第Y章节
□ 数据表格（≥3列）：第Z章节
□ 流程步骤（1→2→3）：第W章节
□ 案例故事：第V章节
□ 强调结论："关键发现"、"核心建议"
```

### ⚠️ Token限制处理：如果文档结构很长

```
如果文档包含10+个H2章节，必须分批识别：

阶段1a：识别前5个H2章节
├─ 提取H1和前5个H2的完整结构
├─ 统计前5个章节的内容密度
└─ 输出："步骤2.1阶段1a完成 - 已识别前5个章节结构
       请输入'继续'以识别剩余章节"

【等待用户输入"继续"】

阶段1b：识别后续H2章节
├─ 提取剩余H2的完整结构
├─ 统计剩余章节的内容密度
└─ 输出："步骤2.1阶段1b完成 - 章节结构100%识别完成
       已进入步骤2.2"
```

### 输出产物

- 完整的文档结构地图（所有H1/H2/H3）
- 内容密度统计表（每章节的要点数、数据点数）
- 特殊内容标记清单

### 验证标准

- [ ] 所有标题层级已识别
- [ ] 内容密度已统计
- [ ] 特殊内容已标记
- [ ] 无遗漏章节

---

## 步骤 2.2：规划幻灯片页面类型

### 目标

根据文档结构，规划所有幻灯片页面的类型和数量。

### 幻灯片页面类型清单（5种）

#### P1. 封面页（Cover Page）
- **数量**：1页
- **内容**：
  - 文档主标题（H1）
  - 副标题/核心主题（如有）
  - 日期或版本信息（如有）
  - 作者或机构（如有）
- **示例**：`01-cover-page.html`

#### P2. 目录页（Table of Contents）
- **数量**：1-2页
- **内容**：
  - 所有H2章节标题
  - 章节编号（如：01, 02, 03）
  - 章节简要描述（如有）
- **分页规则**：
  - ≤6个章节 → 1页目录（列表式或网格式）
  - 7-12个章节 → 2页目录（每页6个）
  - ≥13个章节 → 分组目录（按主题分2-3页）
- **示例**：`08-table-of-contents.html`（列表式）、`10-toc-grid-cards.html`（网格式）

#### P3. 章节首页（Chapter Cover）
- **数量**：每个H2章节1页
- **内容**：
  - 章节标题（H2）
  - 章节编号（如：第一章）
  - 章节简要描述（1-2句话概括）
  - 子章节导航（可选，如果H3≤4个）
- **示例**：`11-chapter-overview.html`

#### P4. 内容页（Content Page）
- **数量**：根据内容密度动态计算
- **内容**：
  - 页面标题（H3或主题）
  - 要点列表（≤8个要点）
  - 数据/图表（如有）
  - 表格（如有）
  - 关键结论（如有）
- **分页规则**：
  - ≤8个要点 → 1页
  - 9-16个要点 → 2页（每页≤8个）
  - 17-24个要点 → 3页（每页≤8个）
  - 以此类推
- **示例**：`02-two-column-comparison.html`、`03-three-column.html`、`04-card-grid.html`等

#### P5. 结束页（Closing Page）
- **数量**：1页
- **内容**：
  - "谢谢" 或 "Thank You"
  - 联系方式（如有）
  - 下一步行动（如有）
  - Q&A提示（可选）

### 执行流程

#### 阶段1：规划固定页面

```markdown
固定页面规划：

1. 封面页（P1）：1页
   - 标题：[文档H1标题]
   - 副标题：[如有]

2. 目录页（P2）：X页
   - 章节数量：[N个H2章节]
   - 分页方案：
     □ N≤6 → 1页（列表式/网格式）
     □ 7≤N≤12 → 2页（每页6个）
     □ N≥13 → 分组目录

3. 结束页（P5）：1页
   - 内容：谢谢 + 联系方式

→ 固定页面总计：[1 + X + 1] 页
```

#### 阶段2：规划章节首页

```markdown
章节首页规划（P3）：

第一章：[章节标题]
  - 章节首页：1页
  - 内容：标题 + 描述 + 子章节导航

第二章：[章节标题]
  - 章节首页：1页
  - 内容：标题 + 描述 + 子章节导航

...

→ 章节首页总计：[N个H2] 页
```

#### 阶段3：规划内容页（关键步骤）

根据步骤2.1的内容密度统计，计算每个章节需要的内容页数量：

```markdown
内容页规划（P4）：

第一章：[章节标题]（总要点：6个）
  ├─ 子章节1.1（3个要点）→ 1页内容页
  ├─ 子章节1.2（2个要点 + 1个表格）→ 1页内容页
  └─ 子章节1.3（1个要点）→ 1页内容页
  → 第一章内容页：3页

第二章：[章节标题]（总要点：20个）
  ├─ 子章节2.1（8个要点）→ 1页内容页
  └─ 子章节2.2（12个要点 + 2个表格）→ 需要分页
      ├─ 内容页1：前8个要点
      └─ 内容页2：后4个要点 + 2个表格
  → 第二章内容页：3页

第三章：[章节标题]（总要点：4个）
  └─ 子章节3.1（4个要点）→ 1页内容页
  → 第三章内容页：1页

→ 内容页总计：7页
```

#### ⚠️ 分页规则详解

**规则1：单页内容上限**
```
每页最多包含：
- 8个要点（bullet points）
- 或 6个要点 + 1个图表
- 或 4个要点 + 1个表格
- 或 2个图表
- 或 1个大型表格（≥5行）
```

**规则2：分页策略**
```
如果子章节包含12个要点：
❌ 错误做法：压缩为1页，每个要点缩减文字
✅ 正确做法：拆分为2页
   - 页面1：前8个要点（标题：子章节名 - 上）
   - 页面2：后4个要点（标题：子章节名 - 下）

如果子章节包含20个要点：
✅ 正确做法：拆分为3页
   - 页面1：要点1-8（标题：子章节名 - 第1部分）
   - 页面2：要点9-16（标题：子章节名 - 第2部分）
   - 页面3：要点17-20（标题：子章节名 - 第3部分）
```

**规则3：内容分组优先**
```
如果子章节有明确的内容分组：
优先按分组拆分，而非机械地按8个要点切割

例如：
子章节2.2：平台分析（12个要点）
  - 分组1：商业模式（5个要点）→ 页面1
  - 分组2：用户策略（4个要点）→ 页面2
  - 分组3：内容策略（3个要点）→ 页面2（合并到页面2）
```

#### 阶段4：汇总页面总数

```markdown
幻灯片页面总数汇总：

1. 封面页（P1）：1页
2. 目录页（P2）：X页
3. 章节首页（P3）：N页（N = H2章节数）
4. 内容页（P4）：M页（根据内容密度计算）
5. 结束页（P5）：1页

→ 总计：[1 + X + N + M + 1] 页
```

### ⚠️ Token限制处理：如果章节很多

```
如果文档包含10+个H2章节，必须分批规划：

阶段3a：规划前5个章节的内容页
├─ 计算前5个章节的内容页数量
├─ 详细列出每页的标题和内容要点数
└─ 输出："步骤2.2阶段3a完成 - 已规划前5个章节的内容页（共X页）
       请输入'继续'以规划剩余章节"

【等待用户输入"继续"】

阶段3b：规划剩余章节的内容页
├─ 计算剩余章节的内容页数量
├─ 详细列出每页的标题和内容要点数
└─ 输出："步骤2.2阶段3b完成 - 所有内容页规划完成（总计Y页）
       已进入步骤2.3"
```

### 输出产物

- 幻灯片页面类型清单（P1-P5）
- 每种类型的页面数量
- 内容页的详细分页方案
- 幻灯片总页数

### 验证标准

- [ ] 所有页面类型已规划
- [ ] 内容页分页合理（每页≤8个要点）
- [ ] 总页数已计算
- [ ] 无内容遗漏

---

## 步骤 2.3：拆分内容到具体页面

### 目标

将文档内容完整、准确地分配到每一页幻灯片，生成详细的页面内容清单。

### 执行要求

为每一页幻灯片创建详细的内容清单，包含：
- 页面编号
- 页面类型
- 页面标题
- 具体内容（完整文字，不压缩）
- 数据点（如有）
- 图表类型（如有）
- 表格内容（如有）

### 执行流程

#### 阶段1：拆分封面页和目录页

```markdown
===== 页面 1：封面页 =====
页面类型：P1 - Cover Page
页面标题：[文档H1标题]

页面内容：
- 主标题：[完整标题文字]
- 副标题：[完整副标题文字]
- 日期：[日期信息]
- 作者：[作者信息]

---

===== 页面 2：目录页 =====
页面类型：P2 - Table of Contents
页面标题：目录 / Contents

页面内容：
1. [第一章完整标题]
2. [第二章完整标题]
3. [第三章完整标题]
4. [第四章完整标题]
5. [第五章完整标题]
6. [第六章完整标题]

（如果章节>6个，继续列出或分页）
```

#### 阶段2：拆分章节首页

```markdown
===== 页面 3：第一章章节首页 =====
页面类型：P3 - Chapter Cover
页面标题：第一章 - [完整章节标题]

页面内容：
- 章节编号：01
- 章节标题：[完整标题]
- 章节描述：[1-2句话描述该章节的核心内容]
- 子章节导航：
  □ 1.1 [子章节完整标题]
  □ 1.2 [子章节完整标题]
  □ 1.3 [子章节完整标题]

---

===== 页面 4：第二章章节首页 =====
页面类型：P3 - Chapter Cover
页面标题：第二章 - [完整章节标题]

（以此类推...）
```

#### 阶段3：拆分内容页（最重要）

**⚠️ 关键原则：100%保留原文内容，不压缩、不省略、不简化**

```markdown
===== 页面 5：内容页 - 子章节1.1 =====
页面类型：P4 - Content Page
页面标题：[子章节1.1完整标题]

页面内容：
1. [要点1完整文字]
   - [子要点1.1完整文字]
   - [子要点1.2完整文字]

2. [要点2完整文字]
   - [子要点2.1完整文字]

3. [要点3完整文字]

数据点：
- [数据1]：[具体数值 + 单位 + 说明]
- [数据2]：[具体数值 + 单位 + 说明]

图表（如有）：
- 图表类型：[柱状图/折线图/饼图等]
- 图表标题：[完整标题]
- 图表数据：[完整数据列表]

表格（如有）：
| 列1标题 | 列2标题 | 列3标题 |
|---------|---------|---------|
| [数据1] | [数据2] | [数据3] |
| [数据4] | [数据5] | [数据6] |

关键结论（如有）：
- [结论1完整文字]
- [结论2完整文字]

---

===== 页面 6：内容页 - 子章节1.2 =====
页面类型：P4 - Content Page
页面标题：[子章节1.2完整标题]

（以此类推...）
```

#### ⚠️ 分页示例（超过8个要点时）

```markdown
===== 页面 10：内容页 - 子章节2.2（第1部分）=====
页面类型：P4 - Content Page
页面标题：[子章节2.2完整标题] - 第1部分

页面内容：
1. [要点1完整文字]
2. [要点2完整文字]
3. [要点3完整文字]
4. [要点4完整文字]
5. [要点5完整文字]
6. [要点6完整文字]
7. [要点7完整文字]
8. [要点8完整文字]

---

===== 页面 11：内容页 - 子章节2.2（第2部分）=====
页面类型：P4 - Content Page
页面标题：[子章节2.2完整标题] - 第2部分

页面内容：
9. [要点9完整文字]
10. [要点10完整文字]
11. [要点11完整文字]
12. [要点12完整文字]

表格：
| 列1 | 列2 | 列3 |
|-----|-----|-----|
| ... | ... | ... |
```

#### 阶段4：拆分结束页

```markdown
===== 页面 N：结束页 =====
页面类型：P5 - Closing Page
页面标题：谢谢 / Thank You

页面内容：
- 感谢语：谢谢观看 / Thank You
- 联系方式：[邮箱/电话/网站]
- 下一步行动：[如有]
- Q&A提示：Questions?
```

### ⚠️ Token限制处理：如果内容页很多

```
如果内容页超过20页，必须分批拆分：

阶段3a：拆分前10页内容页
├─ 详细列出每页的完整内容（100%原文）
├─ 包含所有要点、数据、图表、表格
└─ 输出："步骤2.3阶段3a完成 - 已拆分前10页内容页
       当前进度：页面1-15已完成（封面+目录+章节首页+前10页内容）
       请输入'继续'以拆分剩余内容页"

【等待用户输入"继续"】

阶段3b：拆分剩余内容页
├─ 详细列出每页的完整内容（100%原文）
├─ 包含所有要点、数据、图表、表格
└─ 输出："步骤2.3阶段3b完成 - 所有内容页拆分完成
       总页数：N页
       已进入步骤2.4"
```

### ⚠️ 严禁以下做法

```
❌ 错误做法1：压缩内容
错误示例：
页面内容：
1. 商业模式分析（包含5个要点，省略详细内容）

✅ 正确做法：
页面内容：
1. [要点1完整文字，包含所有细节]
2. [要点2完整文字，包含所有细节]
3. [要点3完整文字，包含所有细节]
4. [要点4完整文字，包含所有细节]
5. [要点5完整文字，包含所有细节]

---

❌ 错误做法2：省略数据
错误示例：
数据点：包含多个数据点（略）

✅ 正确做法：
数据点：
- 平台A估值：14-21亿美元
- 平台B估值：150-200万美元
- 估值差距：10-20倍
- 市场份额：65%
- 用户增长率：15%

---

❌ 错误做法3：简化表格
错误示例：
表格：包含对比数据（略）

✅ 正确做法：
表格：
| 平台 | 估值 | 用户数 | 增长率 |
|------|------|--------|--------|
| A    | 20亿 | 5000万 | 15%    |
| B    | 180万| 50万   | 8%     |
| C    | 5亿  | 1000万 | 12%    |
```

### 输出产物

- 完整的幻灯片页面清单（从第1页到第N页）
- 每页的详细内容（100%原文，无压缩）
- 每页的数据点、图表、表格（如有）
- 页面总数确认

### 验证标准

- [ ] 所有页面已详细列出
- [ ] 每页内容完整（100%原文）
- [ ] 每页要点数≤8个
- [ ] 数据、图表、表格完整
- [ ] 页面编号连续
- [ ] 无内容遗漏

---

## 步骤 2.4：验证内容完整性

### 目标

确保所有原文内容都已正确分配到幻灯片页面，无遗漏、无错误。

### 执行要求

#### 验证项目1：章节完整性检查

```
□ 所有H1标题是否包含？
□ 所有H2章节是否都有对应的页面？
□ 所有H3子章节是否都有对应的页面？
□ 章节顺序是否与原文一致？
```

#### 验证项目2：内容完整性检查

```
□ 所有要点是否都已分配到页面？
□ 所有数据点是否都已包含？
□ 所有表格是否都已包含？
□ 所有结论是否都已包含？
□ 是否有重复内容？
□ 是否有遗漏内容？
```

#### 验证项目3：分页合理性检查

```
□ 每页要点数是否≤8个？
□ 分页是否合理（按内容分组）？
□ 是否有页面内容过多或过少？
□ 页面标题是否清晰？
```

#### 验证项目4：页面数量检查

```
□ 封面页：1页 ✓
□ 目录页：X页（根据章节数量）✓
□ 章节首页：N页（N = H2章节数）✓
□ 内容页：M页（根据内容密度）✓
□ 结束页：1页 ✓
□ 总计：[1 + X + N + M + 1] 页 ✓
```

### 输出产物

- 内容完整性验证报告
- 页面清单确认
- 修正建议（如有）

### 验证标准

- [ ] 所有章节都已包含
- [ ] 所有内容都已分配
- [ ] 分页合理
- [ ] 页面数量正确
- [ ] 无遗漏、无重复

---

## 完成后输出

```
✅ 步骤2：幻灯片内容转换与拆分 - 100%完成

输出摘要：
- 幻灯片总页数：[N]页
- 页面类型分布：
  ├─ 封面页：1页
  ├─ 目录页：[X]页
  ├─ 章节首页：[N]页
  ├─ 内容页：[M]页
  └─ 结束页：1页
- 内容完整性：100%（无遗漏、无删减、无简化）
- 分页合理性：每页≤8个要点

输出产物：
1. 文档结构地图（已生成）
2. 内容密度统计表（已生成）
3. 幻灯片页面类型清单（已生成）
4. 完整的幻灯片页面清单（已生成）
5. 内容完整性验证报告（已生成）

已进入步骤3：HTML样式布局代码规划与生成
```
